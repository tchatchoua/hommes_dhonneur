import{a as ce}from"./chunk-U3EEIW23.js";import{G as se,a as ne,b as oe,k as ae,m as re,q as le}from"./chunk-X5J6KBJZ.js";import{$ as F,A as c,Aa as j,B as v,Ba as N,C as E,E as b,Ea as R,F as M,G as S,Ga as z,Ha as H,Ja as Y,Ma as $,Na as q,P as T,Pa as G,Qa as J,Ta as K,Ua as Q,Wa as U,Xa as X,Za as Z,_a as ee,ba as O,bb as te,cb as ie,ga as V,h as g,i as p,j as C,ka as k,l,m as f,n as P,o as h,p as y,qa as D,r as w,ra as L,s as I,t as A,u as i,v as a,w as s,x,xa as W,y as _,z as d,za as B}from"./chunk-CLQQFUUR.js";import"./chunk-B5Q7V33N.js";import"./chunk-7KGURMOZ.js";import"./chunk-MEY4KOAF.js";import"./chunk-K4BOZHCE.js";import"./chunk-VKOJ4YFE.js";import"./chunk-URA66MOF.js";import"./chunk-R5HL6L5F.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-L7HKPRYE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{e as u}from"./chunk-JHI3MBHO.js";var me=(n,m)=>m.id;function ge(n,m){n&1&&(i(0,"div",2),s(1,"ion-spinner",8),i(2,"p"),c(3,"Loading categories..."),a()())}function pe(n,m){if(n&1){let e=x();i(0,"div",3),s(1,"ion-icon",9),i(2,"h3"),c(3,"No Categories Yet"),a(),i(4,"p"),c(5,"Create your first category"),a(),i(6,"ion-button",5),_("click",function(){g(e);let t=d();return p(t.openAddModal())}),s(7,"ion-icon",10),c(8," Add Category "),a()()}}function _e(n,m){if(n&1){let e=x();i(0,"ion-item"),s(1,"ion-icon",11),i(2,"ion-label")(3,"h2"),c(4),a(),i(5,"p"),c(6),a()(),i(7,"ion-button",12),_("click",function(){let t=g(e).$implicit,r=d(2);return p(r.openEditModal(t))}),s(8,"ion-icon",13),a(),i(9,"ion-button",14),_("click",function(){let t=g(e).$implicit,r=d(2);return p(r.confirmDelete(t))}),s(10,"ion-icon",15),a()()}if(n&2){let e=m.$implicit;l(4),v(e.name),l(2),v(e.description||"No description")}}function ue(n,m){if(n&1&&(i(0,"ion-list"),I(1,_e,11,2,"ion-item",null,me),a()),n&2){let e=d();l(),A(e.categories())}}function Ce(n,m){n&1&&s(0,"ion-spinner",8)}function ye(n,m){n&1&&c(0," Save ")}function fe(n,m){if(n&1){let e=x();i(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",5),_("click",function(){g(e);let t=d();return p(t.closeModal())}),s(4,"ion-icon",16),a()(),i(5,"ion-title"),c(6),a(),i(7,"ion-buttons",17)(8,"ion-button",18),_("click",function(){g(e);let t=d();return p(t.saveCategory())}),h(9,Ce,1,0,"ion-spinner",8)(10,ye,1,0),a()()()(),i(11,"ion-content",19)(12,"ion-list")(13,"ion-item")(14,"ion-input",20),S("ngModelChange",function(t){g(e);let r=d();return M(r.categoryForm.name,t)||(r.categoryForm.name=t),p(t)}),a()(),i(15,"ion-item")(16,"ion-select",21),S("ngModelChange",function(t){g(e);let r=d();return M(r.categoryForm.type,t)||(r.categoryForm.type=t),p(t)}),i(17,"ion-select-option",22),c(18,"Contribution"),a(),i(19,"ion-select-option",23),c(20,"Debt"),a()()(),i(21,"ion-item")(22,"ion-textarea",24),S("ngModelChange",function(t){g(e);let r=d();return M(r.categoryForm.description,t)||(r.categoryForm.description=t),p(t)}),a()()()()}if(n&2){let e=d();l(6),E("",e.editingCategory?"Edit":"Add"," Category"),l(2),y("disabled",e.isSaving()),l(),w(e.isSaving()?9:10),l(5),b("ngModel",e.categoryForm.name),l(2),b("ngModel",e.categoryForm.type),y("disabled",!!e.editingCategory),l(6),b("ngModel",e.categoryForm.description),y("rows",3)}}var Te=(()=>{class n{categoryService;alertController;toastController;categories=C([]);isLoading=C(!0);isSaving=C(!1);isModalOpen=C(!1);editingCategory=null;categoryForm={name:"",type:"Contribution",description:""};constructor(e,o,t){this.categoryService=e,this.alertController=o,this.toastController=t,ne({addOutline:oe,folderOutline:le,closeOutline:ae,createOutline:re,trashOutline:se})}ngOnInit(){this.loadCategories()}loadCategories(){this.isLoading.set(!0),this.categoryService.getAll().subscribe({next:e=>{e.success&&e.data&&this.categories.set(e.data),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}refresh(e){this.loadCategories(),setTimeout(()=>{e.target.complete()},1e3)}openAddModal(){this.editingCategory=null,this.categoryForm={name:"",type:"Contribution",description:""},this.isModalOpen.set(!0)}openEditModal(e){this.editingCategory=e,this.categoryForm={name:e.name,type:e.type,description:e.description||""},this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1),this.editingCategory=null}saveCategory(){return u(this,null,function*(){if(!this.categoryForm.name.trim()){yield(yield this.toastController.create({message:"Please enter a category name",duration:2e3,color:"warning"})).present();return}this.isSaving.set(!0),(this.editingCategory?this.categoryService.update(this.editingCategory.id,this.categoryForm):this.categoryService.create(this.categoryForm)).subscribe({next:o=>u(this,null,function*(){this.isSaving.set(!1),o.success&&(this.closeModal(),this.loadCategories(),yield(yield this.toastController.create({message:`Category ${this.editingCategory?"updated":"created"} successfully`,duration:2e3,color:"success"})).present())}),error:()=>u(this,null,function*(){this.isSaving.set(!1),yield(yield this.toastController.create({message:`Failed to ${this.editingCategory?"update":"create"} category`,duration:2e3,color:"danger"})).present()})})})}confirmDelete(e){return u(this,null,function*(){yield(yield this.alertController.create({header:"Delete Category",message:`Are you sure you want to delete "${e.name}"?`,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",role:"destructive",handler:()=>{this.deleteCategory(e)}}]})).present()})}deleteCategory(e){return u(this,null,function*(){this.categoryService.delete(e.id).subscribe({next:o=>u(this,null,function*(){o.success&&(this.loadCategories(),yield(yield this.toastController.create({message:"Category deleted",duration:2e3,color:"success"})).present())}),error:()=>u(this,null,function*(){yield(yield this.toastController.create({message:"Failed to delete category",duration:2e3,color:"danger"})).present()})})})}static \u0275fac=function(o){return new(o||n)(f(ce),f(U),f(X))};static \u0275cmp=P({type:n,selectors:[["app-admin-categories"]],decls:17,vars:2,consts:[["slot","start"],["slot","fixed",3,"ionRefresh"],[1,"loading-container"],[1,"empty-state"],["slot","fixed","vertical","bottom","horizontal","end"],[3,"click"],["name","add-outline"],[3,"didDismiss","isOpen"],["name","crescent"],["name","folder-outline"],["slot","start","name","add-outline"],["name","folder-outline","slot","start","color","primary"],["fill","clear","slot","end",3,"click"],["slot","icon-only","name","create-outline"],["fill","clear","slot","end","color","danger",3,"click"],["slot","icon-only","name","trash-outline"],["slot","icon-only","name","close-outline"],["slot","end"],[3,"click","disabled"],[1,"ion-padding"],["type","text","label","Category Name","labelPlacement","floating","placeholder","Enter category name",3,"ngModelChange","ngModel"],["label","Category Type","labelPlacement","floating",3,"ngModelChange","ngModel","disabled"],["value","Contribution"],["value","Debt"],["label","Description","labelPlacement","floating","placeholder","Enter description (optional)",3,"ngModelChange","ngModel","rows"]],template:function(o,t){o&1&&(i(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),s(3,"ion-menu-button"),a(),i(4,"ion-title"),c(5,"Categories"),a()()(),i(6,"ion-content")(7,"ion-refresher",1),_("ionRefresh",function(de){return t.refresh(de)}),s(8,"ion-refresher-content"),a(),h(9,ge,4,0,"div",2)(10,pe,9,0,"div",3)(11,ue,3,0,"ion-list"),i(12,"ion-fab",4)(13,"ion-fab-button",5),_("click",function(){return t.openAddModal()}),s(14,"ion-icon",6),a()(),i(15,"ion-modal",7),_("didDismiss",function(){return t.closeModal()}),h(16,fe,23,8,"ng-template"),a()()),o&2&&(l(9),w(t.isLoading()&&t.categories().length===0?9:t.categories().length===0?10:11),l(6),y("isOpen",t.isModalOpen()))},dependencies:[T,V,F,O,N,Q,K,W,H,R,z,Z,D,J,$,q,L,Y,B,j,k,ee,ie,te,G],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:var(--ion-color-medium)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;color:var(--ion-color-medium);margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:0 0 24px}"]})}return n})();export{Te as AdminCategoriesPage};
