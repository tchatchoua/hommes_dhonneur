import{a as z,n as J,o as K,t as Q,y as W}from"./chunk-X5J6KBJZ.js";import{a as V}from"./chunk-BYLLDUDU.js";import{$ as y,A as a,B as b,Ea as A,La as D,Qa as G,Sa as R,V as x,W as I,X as S,Za as B,_ as v,_a as H,aa as M,ca as w,da as O,ea as L,fa as E,ha as F,j as f,l as r,m as d,n as C,o as _,p as c,qa as T,r as g,sa as k,ta as N,u as n,ua as q,v as o,va as U,w as m,xa as j,y as h,z as P}from"./chunk-CLQQFUUR.js";import"./chunk-B5Q7V33N.js";import"./chunk-7KGURMOZ.js";import"./chunk-MEY4KOAF.js";import"./chunk-K4BOZHCE.js";import"./chunk-VKOJ4YFE.js";import"./chunk-URA66MOF.js";import"./chunk-R5HL6L5F.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-L7HKPRYE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function X(e,u){e&1&&(n(0,"ion-note",5),a(1," Username or email is required "),o())}function Y(e,u){e&1&&(n(0,"ion-note",5),a(1," Password is required "),o())}function Z(e,u){if(e&1&&(n(0,"ion-text",9)(1,"p",15),a(2),o()()),e&2){let i=P();r(2),b(i.errorMessage())}}function $(e,u){e&1&&m(0,"ion-spinner",11)}function ee(e,u){e&1&&(m(0,"ion-icon",16),a(1," Sign In "))}var _e=(()=>{class e{fb;authService;router;route;loginForm;isLoading=f(!1);showPassword=f(!1);errorMessage=f("");constructor(i,l,t,s){this.fb=i,this.authService=l,this.router=t,this.route=s,z({logInOutline:Q,personAddOutline:W,eyeOutline:K,eyeOffOutline:J}),this.loginForm=this.fb.group({usernameOrEmail:["",[v.required]],password:["",[v.required]]})}togglePassword(){this.showPassword.update(i=>!i)}onSubmit(){this.loginForm.invalid||(this.isLoading.set(!0),this.errorMessage.set(""),this.authService.login(this.loginForm.value).subscribe({next:i=>{if(this.isLoading.set(!1),i.success){let l=this.route.snapshot.queryParams.returnUrl||"/dashboard";this.router.navigateByUrl(l)}else this.errorMessage.set(i.message||"Login failed")},error:i=>{this.isLoading.set(!1),this.errorMessage.set(i.message||"Login failed")}}))}static \u0275fac=function(l){return new(l||e)(d(E),d(V),d(I),d(x))};static \u0275cmp=C({type:e,selectors:[["app-login"]],decls:31,vars:8,consts:[[1,"ion-padding"],[1,"login-container"],[1,"logo-section"],[3,"ngSubmit","formGroup"],["formControlName","usernameOrEmail","type","text","label","Username or Email","labelPlacement","floating","placeholder","Enter your username or email"],["color","danger",1,"ion-padding-start"],["formControlName","password","label","Password","labelPlacement","floating","placeholder","Enter your password",3,"type"],["fill","clear","slot","end",3,"click"],[3,"name"],["color","danger"],["type","submit","expand","block",1,"ion-margin-top",3,"disabled"],["name","crescent"],[1,"register-link","ion-text-center","ion-margin-top"],["fill","clear","routerLink","/auth/register"],["slot","start","name","person-add-outline"],[1,"error-message"],["slot","start","name","log-in-outline"]],template:function(l,t){if(l&1&&(n(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"h1"),a(4,"Community Finance Tracker"),o(),n(5,"p"),a(6,"Manage your community's finances with ease"),o()(),n(7,"ion-card")(8,"ion-card-header")(9,"ion-card-title"),a(10,"Sign In"),o()(),n(11,"ion-card-content")(12,"form",3),h("ngSubmit",function(){return t.onSubmit()}),n(13,"ion-item"),m(14,"ion-input",4),o(),_(15,X,2,0,"ion-note",5),n(16,"ion-item"),m(17,"ion-input",6),n(18,"ion-button",7),h("click",function(){return t.togglePassword()}),m(19,"ion-icon",8),o()(),_(20,Y,2,0,"ion-note",5)(21,Z,3,1,"ion-text",9),n(22,"ion-button",10),_(23,$,1,0,"ion-spinner",11)(24,ee,2,0),o()(),n(25,"div",12)(26,"p"),a(27,"Don't have an account?"),o(),n(28,"ion-button",13),m(29,"ion-icon",14),a(30," Create Account "),o()()()()()()),l&2){let s,p;r(12),c("formGroup",t.loginForm),r(3),g((s=t.loginForm.get("usernameOrEmail"))!=null&&s.invalid&&((s=t.loginForm.get("usernameOrEmail"))!=null&&s.touched)?15:-1),r(2),c("type",t.showPassword()?"text":"password"),r(2),c("name",t.showPassword()?"eye-off-outline":"eye-outline"),r(),g((p=t.loginForm.get("password"))!=null&&p.invalid&&((p=t.loginForm.get("password"))!=null&&p.touched)?20:-1),r(),g(t.errorMessage()?21:-1),r(),c("disabled",t.loginForm.invalid||t.isLoading()),r(),g(t.isLoading()?23:24)}},dependencies:[F,w,y,M,O,L,S,j,k,q,U,N,A,H,T,B,R,G,D],styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;padding-top:40px}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--ion-color-primary);margin-bottom:8px}.logo-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium)}ion-card[_ngcontent-%COMP%]{margin:0}ion-card-title[_ngcontent-%COMP%]{text-align:center}ion-item[_ngcontent-%COMP%]{--padding-start: 0;margin-bottom:8px}.error-message[_ngcontent-%COMP%]{text-align:center;margin:16px 0}.register-link[_ngcontent-%COMP%]{margin-top:24px}.register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:8px;color:var(--ion-color-medium)}"]})}return e})();export{_e as LoginPage};
