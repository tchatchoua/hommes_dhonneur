import{a as le}from"./chunk-66DYWRGA.js";import{C as re,E as ae,G as se,a as ie,z as oe}from"./chunk-X5J6KBJZ.js";import{$ as k,$a as ne,A as m,B as L,Ba as V,C as _,Ca as W,D as b,Da as D,E as O,Ea as q,F as E,G as w,Ga as H,H as A,Ha as G,Ja as J,Ma as K,Na as X,P as T,Qa as Y,Ta as Z,Ua as $,X as N,Xa as ee,Za as te,ba as Q,ga as R,h as C,i as I,j as g,k as x,l,m as f,n as v,o as S,oa as B,p as u,pa as F,r as y,ra as j,s as M,t as P,u as n,v as i,w as c,x as U,xa as z,y as p,z as h}from"./chunk-CLQQFUUR.js";import"./chunk-B5Q7V33N.js";import"./chunk-7KGURMOZ.js";import"./chunk-MEY4KOAF.js";import"./chunk-K4BOZHCE.js";import"./chunk-VKOJ4YFE.js";import"./chunk-URA66MOF.js";import"./chunk-R5HL6L5F.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-L7HKPRYE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var me=t=>["/admin/users",t],ce=(t,d)=>d.id;function de(t,d){t&1&&(n(0,"div",3),c(1,"ion-spinner",5),n(2,"p"),m(3,"Loading users..."),i()())}function ue(t,d){t&1&&(n(0,"div",4),c(1,"ion-icon",6),n(2,"h3"),m(3,"No Users Found"),i(),n(4,"p"),m(5,"No users match your search criteria"),i()())}function pe(t,d){if(t&1&&(n(0,"ion-item",7)(1,"ion-avatar",0),c(2,"img",9),i(),n(3,"ion-label")(4,"h2"),m(5),i(),n(6,"p"),m(7),i(),n(8,"p"),m(9),i()(),n(10,"ion-badge",10),m(11),i()()),t&2){let e=d.$implicit;u("routerLink",A(8,me,e.id)),l(2),u("src",e.photoUrl||"https://ionicframework.com/docs/img/demos/avatar.svg",x),l(3),b("",e.firstName," ",e.lastName,""),l(2),L(e.email),l(2),_("@",e.username,""),l(),u("color",e.role==="Admin"?"primary":"medium"),l(),_(" ",e.role," ")}}function ge(t,d){if(t&1){let e=U();n(0,"ion-list"),M(1,pe,12,10,"ion-item",7,ce),i(),n(3,"ion-infinite-scroll",8),p("ionInfinite",function(o){C(e);let a=h();return I(a.loadMore(o))}),c(4,"ion-infinite-scroll-content"),i()}if(t&2){let e=h();l(),P(e.users())}}var be=(()=>{class t{userService;toastController;users=g([]);isLoading=g(!0);searchQuery="";currentPage=1;pageSize=20;hasMore=!0;constructor(e,r){this.userService=e,this.toastController=r,ie({personOutline:oe,searchOutline:re,shieldCheckmarkOutline:ae,trashOutline:se})}ngOnInit(){this.loadUsers()}loadUsers(e=!1){e||(this.isLoading.set(!0),this.currentPage=1),this.userService.getAll().subscribe({next:r=>{if(r.success&&r.data){let o=r.data;if(this.searchQuery){let a=this.searchQuery.toLowerCase();o=o.filter(s=>s.firstName.toLowerCase().includes(a)||s.lastName.toLowerCase().includes(a)||s.email.toLowerCase().includes(a)||s.username&&s.username.toLowerCase().includes(a))}e?this.users.update(a=>[...a,...o]):this.users.set(o),this.hasMore=!1}this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}onSearch(){this.loadUsers()}loadMore(e){e.target.complete()}refresh(e){this.loadUsers(),setTimeout(()=>{e.target.complete()},1e3)}static \u0275fac=function(r){return new(r||t)(f(le),f(ee))};static \u0275cmp=v({type:t,selectors:[["app-admin-users"]],decls:14,vars:2,consts:[["slot","start"],["placeholder","Search users...","debounce","300",3,"ngModelChange","ionInput","ngModel"],["slot","fixed",3,"ionRefresh"],[1,"loading-container"],[1,"empty-state"],["name","crescent"],["name","person-outline"],["detail","",3,"routerLink"],[3,"ionInfinite"],["alt","Avatar",3,"src"],["slot","end",3,"color"]],template:function(r,o){r&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),c(3,"ion-menu-button"),i(),n(4,"ion-title"),m(5,"User Management"),i()(),n(6,"ion-toolbar")(7,"ion-searchbar",1),w("ngModelChange",function(s){return E(o.searchQuery,s)||(o.searchQuery=s),s}),p("ionInput",function(){return o.onSearch()}),i()()(),n(8,"ion-content")(9,"ion-refresher",2),p("ionRefresh",function(s){return o.refresh(s)}),c(10,"ion-refresher-content"),i(),S(11,de,4,0,"div",3)(12,ue,6,0,"div",4)(13,ge,5,0),i()),r&2&&(l(7),O("ngModel",o.searchQuery),l(4),y(o.isLoading()&&o.users().length===0?11:o.users().length===0?12:13))},dependencies:[T,R,k,Q,N,V,$,Z,z,G,q,H,te,F,Y,K,X,j,J,ne,B,W,D],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;color:var(--ion-color-medium)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;color:var(--ion-color-medium);margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:0}ion-avatar[_ngcontent-%COMP%]{width:48px;height:48px}"]})}return t})();export{be as AdminUsersPage};
