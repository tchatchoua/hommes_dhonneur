import{a as Ie}from"./chunk-66DYWRGA.js";import{E as Ce,G as Se,J as ve,a as ge,d as he,g as _e,v as xe,z as fe}from"./chunk-X5J6KBJZ.js";import{$ as H,A as i,B as u,Ba as ne,C as b,D as T,E as R,Ea as ie,F as k,G as L,Ga as oe,Ha as ae,I as g,J as f,K as y,N as j,O as F,P as N,Pa as re,Qa as le,Ta as se,Ua as ce,V,W as z,Wa as de,Xa as me,Za as ue,ba as W,bb as pe,ga as q,h as C,i as S,j as _,ja as G,k as D,l as r,m as p,n as M,o as O,oa as J,p as v,pa as K,qa as Q,r as A,ra as X,sa as Y,ta as Z,u as e,ua as $,v as t,va as ee,w as s,x as B,xa as te,y as I,z as x}from"./chunk-CLQQFUUR.js";import"./chunk-B5Q7V33N.js";import"./chunk-7KGURMOZ.js";import"./chunk-MEY4KOAF.js";import"./chunk-K4BOZHCE.js";import"./chunk-VKOJ4YFE.js";import"./chunk-URA66MOF.js";import"./chunk-R5HL6L5F.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-L7HKPRYE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{e as m}from"./chunk-JHI3MBHO.js";function be(c,E){c&1&&(e(0,"div",6),s(1,"ion-spinner",8),t())}function ye(c,E){c&1&&(e(0,"div",7),s(1,"ion-icon",9),e(2,"h3"),i(3,"User Not Found"),t()())}function Ee(c,E){if(c&1){let o=B();e(0,"ion-card",10)(1,"ion-card-content")(2,"div",11)(3,"ion-avatar"),s(4,"img",12),t(),e(5,"h2"),i(6),t(),e(7,"p"),i(8),t(),e(9,"ion-badge",13),i(10),t()()()(),e(11,"ion-card")(12,"ion-card-header")(13,"ion-card-title"),i(14,"User Information"),t()(),e(15,"ion-card-content")(16,"ion-list")(17,"ion-item"),s(18,"ion-icon",14),e(19,"ion-label")(20,"p"),i(21,"Email"),t(),e(22,"h3"),i(23),t()()(),e(24,"ion-item"),s(25,"ion-icon",15),e(26,"ion-label")(27,"p"),i(28,"Date of Birth"),t(),e(29,"h3"),i(30),g(31,"date"),t()()(),e(32,"ion-item"),s(33,"ion-icon",15),e(34,"ion-label")(35,"p"),i(36,"Member Since"),t(),e(37,"h3"),i(38),g(39,"date"),t()()()()()(),e(40,"ion-card")(41,"ion-card-header")(42,"ion-card-title"),i(43,"Role Management"),t()(),e(44,"ion-card-content")(45,"ion-item")(46,"ion-select",16),L("ngModelChange",function(a){C(o);let d=x();return k(d.selectedRole,a)||(d.selectedRole=a),S(a)}),I("ionChange",function(){C(o);let a=x();return S(a.updateRole())}),e(47,"ion-select-option",17),i(48,"User"),t(),e(49,"ion-select-option",18),i(50,"Admin"),t()()()()(),e(51,"ion-card")(52,"ion-card-header")(53,"ion-card-title"),i(54,"Financial Summary"),t()(),e(55,"ion-card-content")(56,"ion-list")(57,"ion-item"),s(58,"ion-icon",19),e(59,"ion-label")(60,"p"),i(61,"Total Contributions"),t(),e(62,"h3"),i(63),g(64,"currency"),t()()(),e(65,"ion-item"),s(66,"ion-icon",20),e(67,"ion-label")(68,"p"),i(69,"Total Debts"),t(),e(70,"h3"),i(71),g(72,"currency"),t()()(),e(73,"ion-item"),s(74,"ion-icon",21),e(75,"ion-label")(76,"p"),i(77,"Pending Debts"),t(),e(78,"h3"),i(79),g(80,"currency"),t()()()()()()}if(c&2){let o,n,a,d,h,w,P,U,l=x();r(4),v("src",((o=l.user())==null?null:o.photoUrl)||"https://ionicframework.com/docs/img/demos/avatar.svg",D),r(2),T("",(n=l.user())==null?null:n.firstName," ",(n=l.user())==null?null:n.lastName,""),r(2),b("@",(a=l.user())==null?null:a.username,""),r(),v("color",((d=l.user())==null?null:d.role)==="Admin"?"primary":"medium"),r(),b(" ",(h=l.user())==null?null:h.role," "),r(13),u((w=l.user())==null?null:w.email),r(7),u(y(31,13,(P=l.user())==null?null:P.dateOfBirth,"mediumDate")),r(8),u(y(39,16,(U=l.user())==null?null:U.createdAt,"mediumDate")),r(8),R("ngModel",l.selectedRole),r(17),u(f(64,19,l.userStats().totalContributions)),r(8),u(f(72,21,l.userStats().totalDebts)),r(8),u(f(80,23,l.userStats().pendingDebts))}}var Fe=(()=>{class c{route;router;userService;alertController;toastController;user=_(null);isLoading=_(!0);selectedRole="User";userStats=_({totalContributions:0,totalDebts:0,pendingDebts:0});constructor(o,n,a,d,h){this.route=o,this.router=n,this.userService=a,this.alertController=d,this.toastController=h,ge({personOutline:fe,mailOutline:xe,calendarOutline:he,cashOutline:_e,walletOutline:ve,shieldCheckmarkOutline:Ce,trashOutline:Se})}ngOnInit(){let o=this.route.snapshot.params.id;o&&this.loadUser(o)}loadUser(o){this.isLoading.set(!0),this.userService.getById(o).subscribe({next:n=>{n.success&&n.data&&(this.user.set(n.data),this.selectedRole=n.data.role),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}updateRole(){return m(this,null,function*(){let o=this.user();o&&this.userService.updateRole(o.id,this.selectedRole).subscribe({next:n=>m(this,null,function*(){n.success&&(yield(yield this.toastController.create({message:"User role updated",duration:2e3,color:"success"})).present(),this.loadUser(o.id))}),error:()=>m(this,null,function*(){yield(yield this.toastController.create({message:"Failed to update role",duration:2e3,color:"danger"})).present()})})})}confirmDelete(){return m(this,null,function*(){yield(yield this.alertController.create({header:"Delete User",message:"Are you sure you want to delete this user? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",role:"destructive",handler:()=>{this.deleteUser()}}]})).present()})}deleteUser(){return m(this,null,function*(){let o=this.user();o&&this.userService.delete(o.id).subscribe({next:n=>m(this,null,function*(){n.success&&(yield(yield this.toastController.create({message:"User deleted",duration:2e3,color:"success"})).present(),this.router.navigate(["/admin/users"]))}),error:()=>m(this,null,function*(){yield(yield this.toastController.create({message:"Failed to delete user",duration:2e3,color:"danger"})).present()})})})}static \u0275fac=function(n){return new(n||c)(p(V),p(z),p(Ie),p(de),p(me))};static \u0275cmp=M({type:c,selectors:[["app-admin-user-detail"]],decls:13,vars:1,consts:[["slot","start"],["defaultHref","/admin/users"],["slot","end"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[1,"ion-padding"],[1,"loading-container"],[1,"empty-state"],["name","crescent"],["name","person-outline"],[1,"profile-card"],[1,"profile-header"],["alt","Avatar",3,"src"],[3,"color"],["name","mail-outline","slot","start"],["name","calendar-outline","slot","start"],["label","User Role","labelPlacement","floating",3,"ngModelChange","ionChange","ngModel"],["value","User"],["value","Admin"],["name","cash-outline","slot","start","color","success"],["name","wallet-outline","slot","start","color","danger"],["name","wallet-outline","slot","start","color","warning"]],template:function(n,a){n&1&&(e(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),s(3,"ion-back-button",1),t(),e(4,"ion-title"),i(5,"User Details"),t(),e(6,"ion-buttons",2)(7,"ion-button",3),I("click",function(){return a.confirmDelete()}),s(8,"ion-icon",4),t()()()(),e(9,"ion-content",5),O(10,be,2,0,"div",6)(11,ye,4,0,"div",7)(12,Ee,81,25),t()),n&2&&(r(10),A(a.isLoading()?10:a.user()?12:11))},dependencies:[N,F,j,q,H,W,ne,ce,se,te,Y,$,ee,Z,ae,ie,oe,ue,K,Q,le,X,G,J,pe,re],styles:[".loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:48px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;color:var(--ion-color-medium);margin-bottom:16px}.profile-card[_ngcontent-%COMP%]{text-align:center}.profile-header[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:100px;height:100px;margin:0 auto 16px}.profile-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin:0 0 4px}.profile-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:0 0 12px}ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:16px}"]})}return c})();export{Fe as AdminUserDetailPage};
